<!Doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">  
        <title>NoteApp</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <!-- Link for font awesome library -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Chicle|Lato|Monoton" rel="stylesheet">
    </head>
    <body>
        

             <div class="row" style="background-color:rgb(240, 236, 236);">
                <div class="col-12">
                    <h1 class="col-12 text-center txt-shadow" style="text-shadow: -1px 2px 6px rgba(150, 150, 150, 1);font-size: 5em;word-spacing: 0.3em;">MY NOTE APP</h1>
                </div>
            </div>
            <hr>
        <div class="container" style=""> 

            <div class="row" style="margin:5px;">

                    <form class="col-4" action="{% url 'storenote' %}" method="post" style="text-center;padding: 1em;margin-top:2%;">
                    {% csrf_token %}
                        <input type="text" placeholder="Note Title" required name="heading" class="form-control">
                        <br>
                        <textarea placeholder="Type something..." required rows="4" name="note" class="form-control"></textarea>
                        <br>
                        <button class="btn btn-outline-primary" style="margin-right:40%;float:right;">
                            Submit
                        </button>
                    </form>

                    <div class="col-8 boxyfy" style="background-color:rgb(255, 255, 255);border-top:6px solid rgba(233, 33, 99, 1);border-bottom:6px solid rgba(233, 33, 99, 1);border-radius: 8px;">
                            <p class="text-center" style="font-family: 'Chicle', cursive;font-size: 2.5em;">
                                Features of this Note App
                            </p>
                        <hr>
                        <ul>
                            <li>
                                <strong>Permanent Storage of the data:</strong>
                                <p style="font-family: 'Lato', sans-serif;">
                                    The data saved in this note app do not get deleted unless you want to delete.
                                </p>
                            </li>

                            <li>
                            <strong>Login Features:</strong>
                                <p style="font-family: 'Lato', sans-serif;">
                                    Acess your notes whenever you need in any device.
                                </p>
                            </li>

                            <li>
                            <strong>Privary Assurance:</strong>
                                <p style="font-family: 'Lato', sans-serif;"> 
                                    Yours notes are always safe with django built in security features.
                                </p>
                            </li>
                        </ul>
                        
                    </div>      
            </div>

            
                {% for key,value in notes.items %}
                <div class="card" style="margin:1%;padding:0.5%;width:30%;float:left;">
                    <h2 class="card-head" name="{{key}}">{{ key }}</h2>
                    <p class="card-body" name="{{value.0}}">{{ value.0 }}</p>
                    <p class="card-footer" name="{{ value.1 }}">{{ value.1 }}</p>
                    <div style="float:left;">
                        <button style="width:30%;" class="delete btn btn-danger btn-sm" data-user="{{ request.user }}" data-notes="{{ value.0 }}" data-heading="{{key}}">Delete</button>
                        <button style="width:30%;" class="edit btn btn-primary btn-sm" data-user="{{ request.user }}" data-notes="{{ value.0 }}" data-heading="{{key}}">Edit</button>
                    </div>
                </div>
                {% endfor %}
            

        </div>

        <div class="container-fluid row" style="background-color:rgb(240, 236, 236);">
                <footer class="footer text-center"  style="float: none; margin: 0 auto;margin-top:10px;">

                    <p class="footer-note">Made with
                        <i class="fa fa-heart heart" style="color: #ec3e2e; margin-left:3px;margin-right:3px;"></i> by Rohit
                        <br>rsaw409@gmail.com
                    </p>

                    <div class="contact-logo-holder">

                        <a href="https://github.com/rohitsaw" style="color: #2e3c49; margin-left:3px;margin-right:3px;" target="_blank">
                            <i class="fa fa-github fa-2x contact-logo github"></i>
                        </a>

                        <a href="https://www.linkedin.com/in/rohit-saw-2ab67180/" style="color: #0077b5;margin-left:3px;margin-right:3px;" target="_blank">
                            <i class="fa fa-linkedin fa-2x contact-logo linkedin"></i>
                        </a>

                        <a href="https://www.facebook.com/rohit.saw.106/" style="color:#3b5998; margin-left:2px;margin-right:2px;" target="_blank">
                            <i class="fa fa-facebook fa-2x contact-logo facebook"></i>
                        </a>

                    </div>
                </footer>
        </div>


        <script>
                $(".delete").click(function(e){
                alert("This item will be permanentl deleted.Click ok to proceed.");
                    let heading = $(this).attr("data-heading");
                    let note = $(this).attr("data-notes");
                    let user = $(this).attr("data-user")
                    console.log(heading)
                    console.log(note)
                    console.log(user)
                $.ajax({
                    type: "POST",
                    url: '/ajax/',
                    data: {
                        'csrfmiddlewaretoken' :$('[name=csrfmiddlewaretoken]').val(),
                        'heading' : heading,
                        'note' : note,
                        'user' : user
                    },
                    success: function (data) {
                      if (data=="success") {
                          location.reload();
                      }
                      else{
                          alert("something went wrong");
                      }
                     }
                  });

                });
        </script>
    </body>
</html>